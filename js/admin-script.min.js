!function(a){var e={init:function(){this.click_and_select_shortcode(),this.click_and_select_all(),this.handle_post_type_change(),this.handle_taxonomy_change(),this.show_hide_element_on_change(),this.quick_ajax_tabs(),this.copy_code(),this.quick_ajax_function_generator(),this.accordion_block_toggle()},handle_post_type_change:function(){var e=this;"undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper&&a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_post_type).length&&a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_post_type).on("change",(function(){var t=a(this).val();a.ajax({url:qapl_quick_ajax_helper.ajax_url,type:"POST",data:{action:"qapl_quick_ajax_get_taxonomies_by_post_type",post_type:t,nonce:qapl_quick_ajax_helper.nonce},success:function(t){if(t&&t.data){var _=a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_taxonomy);_.empty(),_.append(t.data),e.trigger_taxonomy_change()}},error:function(a,e,t){}})}))},handle_taxonomy_change:function(){var e=this;if("undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper){var t=a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_taxonomy),_=a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_manual_selected_terms);t.length&&t.on("change",(function(){_.empty(),e.admin_page_loader(_);var t=a(this).val(),n="";a("#post_ID").length&&(n=a("#post_ID").val()),a.ajax({url:qapl_quick_ajax_helper.ajax_url,type:"POST",data:{action:"qapl_quick_ajax_get_terms_by_taxonomy",taxonomy:t,post_id:n,nonce:qapl_quick_ajax_helper.nonce},success:function(a){a&&a.data&&_.fadeOut(100,(function(){_.empty(),_.append(a.data),_.fadeIn(100)}))},error:function(a,e,t){}})}))}},trigger_taxonomy_change:function(){if("undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper){var e=a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_taxonomy),t=a("#"+qapl_quick_ajax_helper.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_helper.quick_ajax_manual_selected_terms);t.length&&(this.admin_page_loader(t),e.trigger("change"))}},admin_page_loader:function(a){a.append('<div class="qapl-admin-page-loader"><span></span><span></span><span></span></div>')},show_hide_element_on_change:function(){a(".show-hide-trigger input, .show-hide-trigger select").on("change",(function(){a(".quick-ajax-field-container[data-conditional]").each((function(){var e=a(this),t=e.data("conditional"),_=!0;a.each(t,(function(e,t){var n=a("#"+e);if((n.is(":checkbox")?n.is(":checked")?"1":"0":n.val())!==t)return _=!1,!1})),_?e.removeClass("inactive"):e.addClass("inactive")}))}))},quick_ajax_tabs:function(){if(a(".quick-ajax-tabs").length){const e=a(".quick-ajax-tab-button"),t=a(".quick-ajax-tab-content");e.on("click",(function(_){_.preventDefault();const n=a(this).data("tab");e.removeClass("active").attr("aria-selected","false").attr("tabindex","-1"),t.removeClass("active").attr("hidden",!0),a(this).addClass("active").attr("aria-selected","true").attr("tabindex","0"),a("#"+n).addClass("active").attr("hidden",!1)})),e.on("keydown",(function(a){const t=e.index(this);let _;if("ArrowRight"===a.key)_=(t+1)%e.length;else{if("ArrowLeft"!==a.key)return;_=(t-1+e.length)%e.length}e.eq(_).focus().click()}))}},copy_code:function(){a(".copy-button").on("click",(function(){var e=a("#"+a(this).data("copy")),t=a("<textarea>").val(e.text()).appendTo("body").select();try{navigator.clipboard.writeText(e.text()).then((()=>{})).catch((a=>{}))}finally{t.remove(),a(this).text("Code Copied"),setTimeout((()=>{a(this).text("Copy Code")}),2e3)}}))},generateId:function(a){let e=0;for(let t=0;t<a.length;t++)e+=a.charCodeAt(t),t%2==0?e+=a.charCodeAt(t):e-=a.charCodeAt(t);return e},getExcludedPostIds:function(a){var e=a.split(/[,\s]+/),t=[];return e.forEach((function(a){/^\d+$/.test(a)&&-1===t.indexOf(a)&&t.push(a)})),t.join(", ")},cleanClassNames:function(a){let e=a.replace(/,/g," ").split(/\s+/);return e=e.filter(((a,e,t)=>!/^\d/.test(a)&&""!==a&&t.indexOf(a)===e)),e.join(", ")},quick_ajax_function_generator:function(){var e=this;a(".generate-function-button").on("click",(function(){var t=a(this),_=t.attr("data-output");t.prop("disabled",!0);var n=a('.copy-button[data-copy="'+_+'"]');n.prop("disabled",!0);var i={};a(".function-generator-wrap input, .function-generator-wrap select").each((function(e,t){var _=a(t),n=_.attr("name"),o=_.attr("id");if("checkbox"===t.type)if(n&&n.endsWith("[]")){let a=n.replace(/\[\]$/,"");i[a]||(i[a]=[]),_.prop("checked")&&i[a].push(_.val())}else i[o]=_.prop("checked")?1:0;else i[o]=_.val()}));let o=Object.values(i).join("");var l="";(l+="$quick_ajax_args = [\n",l+="    'post_type' => '"+i.qapl_select_post_type+"',\n",l+="    'posts_per_page' => "+i.qapl_select_posts_per_page+",\n","none"!==i.qapl_select_orderby&&(l+="    'orderby' => '"+i.qapl_select_orderby+"',\n"),l+="    'order' => '"+i.qapl_select_order+"',\n",""!==i.qapl_select_post_not_in)&&(l+="    'post__not_in' => ["+e.getExcludedPostIds(i.qapl_select_post_not_in)+"],\n");if(1===i.qapl_ignore_sticky_posts&&(l+="    'ignore_sticky_posts' => "+i.qapl_ignore_sticky_posts+",\n"),1===i.qapl_show_select_taxonomy&&(l+="    'selected_taxonomy' => '"+i.qapl_select_taxonomy+"',\n"),1===i.qapl_show_select_taxonomy&&1===i.qapl_manual_term_selection){var c=i.qapl_manual_selected_terms;if(c&&c.length>0){var r="[";r+=c.map((a=>`${a}`)).join(", "),r+="]"}r&&(l+="    'selected_terms' => "+r+",\n")}let s=l.trimEnd();if(s.endsWith(",")&&(l=s.slice(0,-1)+"\n"),l+="];","undefined"!=typeof qapl_quick_ajax_helper&&qapl_quick_ajax_helper){var p={};if(p[qapl_quick_ajax_helper.quick_ajax_id]=e.generateId(o),1===i.qapl_layout_quick_ajax_css_style&&(p[qapl_quick_ajax_helper.quick_ajax_css_style]=i.qapl_layout_quick_ajax_css_style,p[qapl_quick_ajax_helper.grid_num_columns]=i.qapl_layout_select_columns_qty),i.qapl_layout_quick_ajax_post_item_template){var u=i.qapl_layout_quick_ajax_post_item_template;p[qapl_quick_ajax_helper.post_item_template]=u}if(i.qapl_layout_add_taxonomy_filter_class&&""!==i.qapl_layout_add_taxonomy_filter_class){u=e.cleanClassNames(i.qapl_layout_add_taxonomy_filter_class);p[qapl_quick_ajax_helper.taxonomy_filter_class]=u}if(i.qapl_layout_add_container_class&&""!==i.qapl_layout_add_container_class){u=e.cleanClassNames(i.qapl_layout_add_container_class);p[qapl_quick_ajax_helper.container_class]=u}1===i.qapl_show_custom_load_more_post_quantity&&(p[qapl_quick_ajax_helper.load_more_posts]=i.qapl_select_custom_load_more_post_quantity),1===i.qapl_override_global_loader_icon&&(p[qapl_quick_ajax_helper.loader_icon]=i.qapl_loader_icon),1===i.qapl_ajax_on_initial_load&&(p[qapl_quick_ajax_helper.ajax_initial_load]=i.qapl_ajax_on_initial_load),1===i.qapl_ajax_infinite_scroll&&(p[qapl_quick_ajax_helper.infinite_scroll]=i.qapl_ajax_infinite_scroll),1===i.qapl_show_end_post_message&&(p[qapl_quick_ajax_helper.show_end_message]=i.qapl_show_end_post_message)}var d="";Object.keys(p).length>0&&(d="",d+="$quick_ajax_attributes = [\n",Object.entries(p).forEach((([a,t])=>{let _;_=e.quick_ajax_is_numeric(t)?parseInt(t):"string"==typeof t?`'${t}'`:t,d+=`    '${a}' => ${_},\n`})),d=d.slice(0,-2)+"\n",d+="];");var q=null,h=null;if(1===i.qapl_show_order_button&&((q=i.qapl_select_orderby_button_options)&&q.length>0)){h="$quick_ajax_sort_options = [";h+=q.map((a=>`'${a}'`)).join(", "),h+="];"}var x="",f="";null!==q&&(x="",x+=h,f="",f+="if(function_exists('qapl_render_sort_controls')):\n",f+="    qapl_render_sort_controls(\n",f+="        $quick_ajax_args,\n",f+="        $quick_ajax_attributes,\n",f=(f+="        $quick_ajax_sort_options,\n").slice(0,-2)+"\n",f+="    );\n",f+="endif;");var k=null;if(1===i.qapl_show_select_taxonomy)k=i.qapl_select_taxonomy;var j="",m="";null!==k&&(j="",m="",m+="if(function_exists('qapl_render_taxonomy_filter')):\n",m+="    qapl_render_taxonomy_filter(\n",m+="        $quick_ajax_args,\n",m=(m+="        $quick_ajax_attributes,\n").slice(0,-2)+"\n",m+="    );\n",m+="endif;");var g="";g+="if(function_exists('qapl_render_post_container')):\n",g+="   qapl_render_post_container(\n",g+="       $quick_ajax_args,\n",""!==d&&(g+="       $quick_ajax_attributes,\n"),g=g.slice(0,-2)+"\n",g+="   );\n",g+="endif;";var y="";""!==l.trim()&&(y+="\n// Define AJAX query parameters for '"+i.qapl_select_post_type+"' type posts.\n",y+=l.trim()+"\n"),""!==d.trim()&&(y+="\n// Define attributes for AJAX.\n",y+=d.trim()+"\n"),""!==x.trim()&&(y+="\n// Set the sort options for the button.\n",y+=x.trim()+"\n"),""!==f.trim()&&(y+="\n// Render the sorting control button.\n",y+=f.trim()+"\n"),""!==j.trim()&&(y+="\n// Set the taxonomy for filtering posts.\n",y+=j.trim()+"\n"),""!==m.trim()&&(y+="\n// Render the navigation for '"+i.qapl_select_taxonomy+"' taxonomy.\n",y+=m.trim()+"\n"),""!==g.trim()&&(y+="\n// Render the grid for '"+i.qapl_select_post_type+"' type posts.\n",y+=g.trim()+"\n");var v=a("#"+_);v.empty();for(var b=y.split("\n"),w=0;w<b.length;w++)!function(a){setTimeout((function(){v.append(b[a]+"\n"),a===b.length-1&&(t.prop("disabled",!1),n.prop("disabled",!1))}),50*w)}(w)}))},quick_ajax_is_numeric:function(a){return/^-?\d+(\.\d+)?$/.test(a)},quick_ajax_color_picker:function(){a(".color-picker-field").wpColorPicker()},quick_ajax_select_text:function(a){var e,t;document.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(a),e.select()):window.getSelection&&(t=window.getSelection(),(e=document.createRange()).selectNodeContents(a),t.removeAllRanges(),t.addRange(e))},click_and_select_shortcode:function(){var e=this;a(".quick-ajax-shortcode").on("click",(function(){e.quick_ajax_select_text(this)}))},click_and_select_all:function(){var e=this;a(".click-and-select-all").on("click",(function(){var t=a(this).find("code").get(0);e.quick_ajax_select_text(t)}))},accordion_block_toggle:function(){var e=a("#wpbody-content");if(e.find(".quick-ajax-tabs").length>0){var t=a("#adminmenuwrap").outerHeight();e.css("min-height",t)}a(".quick-ajax-accordion-toggle").click((function(){a(this).toggleClass("active").next(".quick-ajax-accordion-content").slideToggle(200)}))}};a(document).ready((function(){e.init()}))}(jQuery);