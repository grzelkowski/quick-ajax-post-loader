!function(t){var a={data_available:"undefined"!=typeof qapl_quick_ajax_admin_data&&qapl_quick_ajax_admin_data,init:function(){this.click_and_select_shortcode(),this.click_and_select(),this.handle_post_type_change(),this.handle_taxonomy_change(),this.show_hide_element_on_change(),this.quick_ajax_tabs(),this.copy_code(),this.copy_input(),this.quick_ajax_function_generator(),this.accordion_block_toggle()},handle_post_type_change:function(){if(!this.data_available)return;const a=this,n=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_post_type);n.length&&n.on("change",(function(){const n=t(this).val();t.ajax({url:qapl_quick_ajax_admin_data.ajax_url,type:"POST",data:{action:"qapl_action_get_taxonomies_by_post_type",post_type:n,nonce:qapl_quick_ajax_admin_data.nonce},success:function(n){if(n&&n.data){const e=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_taxonomy);e.empty(),e.append(n.data),a.trigger_taxonomy_change()}},error:function(t,a,n){}})}))},handle_taxonomy_change:function(){if(!this.data_available)return;const a=this,n=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_taxonomy),e=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_manual_selected_terms);n.length&&n.on("change",(function(){e.empty(),a.admin_page_loader(e);let n=t(this).val(),_="";t("#post_ID").length&&(_=t("#post_ID").val()),t.ajax({url:qapl_quick_ajax_admin_data.ajax_url,type:"POST",data:{action:"qapl_action_get_terms_by_taxonomy",taxonomy:n,post_id:_,nonce:qapl_quick_ajax_admin_data.nonce},success:function(t){t&&t.data&&e.fadeOut(100,(function(){e.empty(),e.append(t.data),e.fadeIn(100)}))},error:function(t,a,n){}})}))},trigger_taxonomy_change:function(){if(!this.data_available)return;const a=this,n=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_taxonomy),e=t("#"+qapl_quick_ajax_admin_data.constants.quick_ajax_settings_wrapper+" #"+qapl_quick_ajax_admin_data.constants.quick_ajax_manual_selected_terms);e.length&&(a.admin_page_loader(e),n.trigger("change"))},admin_page_loader:function(t){t.append('<div class="qapl-admin-page-loader"><span></span><span></span><span></span></div>')},show_hide_element_on_change:function(){t(".show-hide-trigger input, .show-hide-trigger select").on("change",(function(){t(".quick-ajax-field-container[data-conditional]").each((function(){const a=t(this),n=a.data("conditional");let e=!0;for(const a in n){if(!n.hasOwnProperty(a))continue;const _=n[a],o=t("#"+a);if((o.is(":checkbox")?o.is(":checked")?"1":"0":o.val())!==_){e=!1;break}}e?a.removeClass("inactive"):a.addClass("inactive")}))}))},quick_ajax_tabs:function(){if(t(".quick-ajax-tabs").length){const a=t(".quick-ajax-tab-button"),n=t(".quick-ajax-tab-content");a.on("click",(function(e){e.preventDefault();const _=t(this).data("tab"),o=Number(_.split("-").pop()),i=new URL(window.location.href);i.searchParams.set("tab",o),history.replaceState(null,"",i.toString()),a.removeClass("active").attr("aria-selected","false").attr("tabindex","-1"),n.removeClass("active").attr("hidden",!0),t(this).addClass("active").attr("aria-selected","true").attr("tabindex","0"),t("#"+_).addClass("active").attr("hidden",!1)})),a.on("keydown",(function(t){const n=a.index(this);let e;if("ArrowRight"===t.key)e=(n+1)%a.length;else{if("ArrowLeft"!==t.key)return;e=(n-1+a.length)%a.length}a.eq(e).focus().click()}));const e=new URLSearchParams(window.location.search),_=parseInt(e.get("tab"),10);if(!isNaN(_)){const a=t('.quick-ajax-tab-button[data-tab="'+("quick-ajax-tab-"+_)+'"]');a.length&&a.trigger("click")}}},copy_code:function(){const a=this;t(".copy-button-text").on("click",(function(){var n=t(this),e=t("#"+n.data("copy"));e.length&&a.copy_to_clipboard(e.text(),n,n.data("label-copied"),n.text())}))},copy_input:function(){const a=this;t(".copy-button-input").on("click",(function(){var n=t(this),e=document.getElementById(n.data("copy"));e&&a.copy_to_clipboard(e.value,n,n.data("label-copied"),n.text())}))},copy_to_clipboard:function(t,a,n,e,_){var o=_||1e3,i=function(){a.text(n),setTimeout((function(){a.text(e)}),o)};if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then(i).catch((function(){}));else{var c=document.createElement("textarea");c.value=t,c.style.position="fixed",c.style.left="-9999px",document.body.appendChild(c),c.select();try{document.execCommand("copy"),i()}catch(t){}document.body.removeChild(c)}},generateId:function(t){let a=0;for(let n=0;n<t.length;n++)a+=t.charCodeAt(n),n%2==0?a+=t.charCodeAt(n):a-=t.charCodeAt(n);return a},getExcludedPostIds:function(t){var a=t.split(/[,\s]+/),n=[];return a.forEach((function(t){/^\d+$/.test(t)&&-1===n.indexOf(t)&&n.push(t)})),n.join(", ")},cleanClassNames:function(t){let a=t.replace(/,/g," ").split(/\s+/);return a=a.filter(((t,a,n)=>!/^\d/.test(t)&&""!==t&&n.indexOf(t)===a)),a.join(", ")},qapl_collect_input_data:function(){const a={};return t(".function-generator-wrap input, .function-generator-wrap select").each((function(n,e){const _=t(e),o=_.attr("name"),i=_.attr("id");if("checkbox"===e.type)if(o&&o.endsWith("[]")){let t=o.replace(/\[\]$/,"");a[t]||(a[t]=[]),_.prop("checked")&&a[t].push(_.val())}else a[i]=_.prop("checked")?1:0;else a[i]=_.val()})),a},qapl_generate_args:function(t){const a=this;let n="",e="",_="";(n+="$quick_ajax_args = [\n",n+="    'post_type' => '"+t.qapl_select_post_type+"',\n",n+="    'posts_per_page' => "+t.qapl_select_posts_per_page+",\n","none"!==t.qapl_select_orderby&&(n+="    'orderby' => '"+t.qapl_select_orderby+"',\n"),n+="    'order' => '"+t.qapl_select_order+"',\n",""!==t.qapl_select_post_not_in)&&(n+="    'post__not_in' => ["+a.getExcludedPostIds(t.qapl_select_post_not_in)+"],\n");if(1===t.qapl_ignore_sticky_posts&&(n+="    'ignore_sticky_posts' => "+t.qapl_ignore_sticky_posts+",\n"),1===t.qapl_show_select_taxonomy&&(n+="    'selected_taxonomy' => '"+t.qapl_select_taxonomy+"',\n"),1===t.qapl_show_select_taxonomy&&1===t.qapl_manual_term_selection){var o=t.qapl_manual_selected_terms;o&&o.length>0&&(e="[",e+=o.map((t=>`${t}`)).join(", "),e+="]"),e&&(n+="    'selected_terms' => "+e+",\n")}let i=n.trimEnd();return i.endsWith(",")&&(n=i.slice(0,-1)+"\n"),n+="];",""!==n.trim()&&(_+="\n// Define AJAX query parameters for '"+t.qapl_select_post_type+"' type posts.\n",_+=n.trim()+"\n"),_},qapl_generate_attributes:function(t,a){const n=this;let e={},_="";e[qapl_quick_ajax_admin_data.constants.quick_ajax_id]=a,1===t.qapl_layout_quick_ajax_css_style&&(e[qapl_quick_ajax_admin_data.constants.quick_ajax_css_style]=t.qapl_layout_quick_ajax_css_style,e[qapl_quick_ajax_admin_data.constants.grid_num_columns]=t.qapl_layout_select_columns_qty),t.qapl_layout_quick_ajax_post_item_template&&(e[qapl_quick_ajax_admin_data.constants.post_item_template]=t.qapl_layout_quick_ajax_post_item_template),t.qapl_layout_add_taxonomy_filter_class&&""!==t.qapl_layout_add_taxonomy_filter_class&&(e[qapl_quick_ajax_admin_data.constants.taxonomy_filter_class]=n.cleanClassNames(t.qapl_layout_add_taxonomy_filter_class)),t.qapl_layout_add_container_class&&""!==t.qapl_layout_add_container_class&&(e[qapl_quick_ajax_admin_data.constants.container_class]=n.cleanClassNames(t.qapl_layout_add_container_class)),1===t.qapl_show_custom_load_more_post_quantity&&(e[qapl_quick_ajax_admin_data.constants.load_more_posts]=t.qapl_select_custom_load_more_post_quantity),1===t.qapl_override_global_loader_icon&&(e[qapl_quick_ajax_admin_data.constants.loader_icon]=t.qapl_loader_icon),1===t.qapl_ajax_on_initial_load&&(e[qapl_quick_ajax_admin_data.constants.ajax_initial_load]=t.qapl_ajax_on_initial_load),1===t.qapl_ajax_infinite_scroll&&(e[qapl_quick_ajax_admin_data.constants.infinite_scroll]=t.qapl_ajax_infinite_scroll),1===t.qapl_show_end_post_message&&(e[qapl_quick_ajax_admin_data.constants.show_end_message]=t.qapl_show_end_post_message);var o="";return Object.keys(e).length>0&&(o="",o+="$quick_ajax_attributes = [\n",Object.entries(e).forEach((([t,a])=>{let e;e=n.quick_ajax_is_numeric(a)?parseInt(a):"string"==typeof a?`'${a}'`:a,o+=`    '${t}' => ${e},\n`})),o=o.slice(0,-2)+"\n",o+="];"),""!==o.trim()&&(_+="\n// Define attributes for AJAX.\n",_+=o.trim()+"\n"),_},qapl_generate_sort_controls:function(t){let a=null,n=null;1===t.qapl_show_order_button&&(a=t.qapl_select_orderby_button_options,a&&a.length>0&&(n="$quick_ajax_sort_options = [",n+=a.map((t=>`'${t}'`)).join(", "),n+="];"));var e="",_="";null!==a&&n&&(e="",e+=n,_="",_+="if(function_exists('qapl_render_sort_controls')){\n",_+="    qapl_render_sort_controls(\n",_+="        $quick_ajax_args,\n",_+="        $quick_ajax_attributes,\n",_+="        $quick_ajax_sort_options\n",_+="    );\n",_+="}");let o="";return"string"==typeof e&&""!==e.trim()&&(o+="\n// Set the sort options for the button.\n",o+=e.trim()+"\n"),"string"==typeof _&&""!==_.trim()&&(o+="\n// Render the sorting control button.\n",o+=_.trim()+"\n"),o},qapl_generate_taxonomy_filter:function(t){let a=null,n="",e="";return 1===t.qapl_show_select_taxonomy&&(a=t.qapl_select_taxonomy),null!==a&&(e+="if(function_exists('qapl_render_taxonomy_filter')){\n",e+="    qapl_render_taxonomy_filter(\n",e+="        $quick_ajax_args,\n",e+="        $quick_ajax_attributes,\n",e=e.slice(0,-2)+"\n",e+="    );\n",e+="}"),""!==e.trim()&&(n+="\n// Render the navigation for '"+t.qapl_select_taxonomy+"' taxonomy.\n",n+=e.trim()+"\n"),n},qapl_generate_post_container:function(t,a){let n="",e="";return e+="if(function_exists('qapl_render_post_container')){\n",e+="   qapl_render_post_container(\n",e+="       $quick_ajax_args,\n",""!==a&&(e+="       $quick_ajax_attributes,\n"),e=e.slice(0,-2)+"\n",e+="   );\n",e+="}",""!==e.trim()&&(n+="\n// Render the grid for '"+t.qapl_select_post_type+"' type posts.\n",n+=e.trim()+"\n"),n},quick_ajax_function_generator:function(){const a=this;this.data_available&&t(".generate-function-button").on("click",(function(){const n=t(this),e=n.attr("data-output"),_=t("#"+e),o=t('.copy-button-text[data-copy="'+e+'"]');n.prop("disabled",!0),o.prop("disabled",!0);const i=a.qapl_collect_input_data(),c=Object.values(i).join(""),s=a.generateId(c),l=a.qapl_generate_args(i),r=a.qapl_generate_attributes(i,s),d=[l,r,a.qapl_generate_sort_controls(i),a.qapl_generate_taxonomy_filter(i),a.qapl_generate_post_container(i,r)].filter(Boolean).join("");_.empty();for(var p=d.split("\n"),u=0;u<p.length;u++)!function(t){setTimeout((function(){_.append(p[t]+"\n"),t===p.length-1&&(n.prop("disabled",!1),o.prop("disabled",!1))}),50*u)}(u)}))},quick_ajax_is_numeric:function(t){return/^-?\d+(\.\d+)?$/.test(t)},quick_ajax_color_picker:function(){t(".color-picker-field").wpColorPicker()},quick_ajax_select_text_by_type:function(t,a){if(!t)return;if("input"===a)return t.focus(),void t.select();let n,e;document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(t),n.select()):window.getSelection&&(e=window.getSelection(),n=document.createRange(),n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n))},click_and_select_shortcode:function(){const a=this;t(".click-and-select-node").on("click",(function(){a.quick_ajax_select_text_by_type(this,"node")}))},click_and_select:function(){const a=this;t(".click-and-select-input").on("click",(function(){a.quick_ajax_select_text_by_type(this,"input")}))},accordion_block_toggle:function(){var a=t("#wpbody-content");if(a.find(".quick-ajax-tabs").length>0){var n=t("#adminmenuwrap").outerHeight();a.css("min-height",n)}t(".quick-ajax-accordion-toggle").click((function(){t(this).toggleClass("active").next(".quick-ajax-accordion-content").slideToggle(200)}));var e=window.location.hash;if(e){var _=t(e);if(_.length){var o=_.find(".quick-ajax-accordion-toggle").first(),i=o.next(".quick-ajax-accordion-content");o.addClass("active"),i.show();var c=_.offset().top-110;c<0&&(c=0),t("html, body").scrollTop(c)}}}};t(document).ready((function(){a.init()}))}(jQuery);